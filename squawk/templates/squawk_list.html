{% extends "layout.html" %}
{% block title %}
Home - Peacock Social Media
{% endblock title %}

{% block content %}
  <a href="{% url 'squawk:squawk_create' %}">
    <button class="btn btn-primary mb-10 border cursor-pointer p-3 rounded-lg text-blue-600">
    Create New Squawk
    </button>
  </a>
  {% if query and query|length > 0 %}
    <h2 class="text-2xl text-yellow-700 font-bold mb-4">
      Search Results for "{{ query }}"
    </h2>
  {% endif %}
    {% if squawks|length == 0 %}
        <p class="text-gray-300">No squawks available.</p>
    {% endif %}
    <div class="container grid grid-cols-4 gap-3">
    {% for squawk in squawks %}
        <div class="border border-slate-600 p-4 rounded-lg h-4/5 min-h-96 flex flex-col justify-between">
            {% comment %} <fieldset class="border p-4 relative">
                <legend class="px-2">{{ squawk.title }}</legend>
                
            </fieldset> {% endcomment %}
            <div class="flex justify-center mb-4 bg-slate-800 h-3/5 p-2 rounded-lg">
                <img  src="{{ squawk.photo.url }}" class="rounded-lg "  alt="Failed to Load image" />
            </div>
            <h2 class="text-2xl font-semibold mb-2">{{ squawk.title }}</h2>
            <p class="text-gray-300">{{ squawk.content }}</p>
        {% if user.is_authenticated and user == squawk.user %}
         <div class="flex-col gap-2 my-3 ">
            <a  href="../squawks/{{ squawk.id }}/edit">
            <button type="button" 
            class="text-body text-white bg-blue-600 border border-default hover:bg-blue-700 hover:text-heading focus:ring-4 focus:bg-purple-800 shadow-xs font-medium leading-5 rounded min-w-1/3 text-sm px-4 py-2.5 focus:outline-none">

           Edit </button>
            </a>
            <a href="../squawks/{{ squawk.id }}/delete" class="btn btn-danger">  <button type="button" 
            class="text-body text-white bg-red-600 border border-default hover:bg-red-700 hover:text-heading focus:ring-4 focus:bg-red-800 shadow-xs font-medium leading-5 rounded min-w-1/3 text-sm px-4 py-2.5 focus:outline-none">

           Delete </button></a>
            <p class="text-sm text-gray-500 mt-2">Posted on: {{ squawk.created_at }}</p>
        </div>
        {% else %}
            <p class="text-sm text-gray-500 mt-2">Posted by {{ squawk.user.username }} on: {{ squawk.created_at }}</p>
        {% endif %}

       
       
        </div>
    {% endfor %}
    </div>
{% endblock content %}
